@using HitechCraft.WebApplication.Models
@using HitechCraft.WebApplication.Properties
@model LoginViewModel
@{
    ViewBag.Title = "Выполнить вход";
}

<div class="panel panel-primary panel-login">
    <div class="panel-heading">
        @ViewBag.Title
    </div>
    <div class="panel-body">
        @using (Html.BeginForm("Login", "Account", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "form-horizontal loginForm", role = "form", @id = "loginForm" }))
            {
            @Html.AntiForgeryToken()
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <div class="form-group">
                @Html.LabelFor(m => m.EmailOrNickName)
                @Html.TextBoxFor(m => m.EmailOrNickName, new { @class = "form-control" })
                @Html.ValidationMessageFor(m => m.EmailOrNickName, "", new { @class = "text-danger" })
            </div>
            <div class="form-group">
                <label>Пароль</label>
                @Html.PasswordFor(m => m.Password, new { @class = "form-control", @id = "pass" })
                @Html.ActionLink("Забыли пароль?", "ForgotPassword", new { @class = "pass-forgotten" })
                <span class="glyphicon glyphicon-eye-open show-pass" title="Показать пароль"></span>
                @Html.ValidationMessageFor(m => m.Password, "", new { @class = "text-danger" })
            </div>
            <div class="form-group">
                <div class="checkbox">
                    @Html.CheckBoxFor(m => m.RememberMe)
                    @Html.LabelFor(m => m.RememberMe)
                </div>
            </div>
                <div class="form-group">
                    <div class="btn-group btn-group-justified">
                        <a href="javascript:formSubmit()" class="btn btn-default">@Resources.Logon</a>
                        @Html.ActionLink("Регистрация", "Register", null, new { @class = "btn btn-primary" })
                    </div>
                </div>
        }
    </div>
</div>
@*<div class="col-md-4">
        <section id="socialLoginForm">
            @Html.Partial("_ExternalLoginsListPartial", new ExternalLoginListViewModel { ReturnUrl = ViewBag.ReturnUrl })
        </section>
    </div>*@
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}

<script type="text/javascript">
    $('.show-pass').on("click", function() {
        if ($('#pass').attr('type') === 'password') {
            $('#pass').attr('type', 'text');
            $(this).attr('title', 'Скрыть пароль');
            $(this).css('color', '#d6d6d6');
        } else {
            $('#pass').attr('type', 'password');
            $(this).css('color', '#000');
            $(this).attr('title', 'Показать пароль');
        }
    });

    function formSubmit() {
        $('#loginForm').submit();
    }
</script>