@using HitechCraft.Core.Models.Enum
@model HitechCraft.WebApplication.Models.BanEditViewModel
@{
    ViewBag.Title = "CreateAction";
}

<h2>CreateAction</h2>

@using (Html.BeginForm("CreateAction", "BanSystem", FormMethod.Post, new { @class = "form-horizontal" }))
{
    @Html.AntiForgeryToken()

    @Html.ValidationSummary(true)

    <div class="form-group">
        @Html.LabelFor(model => model.PlayerName)
        @Html.DropDownListFor(model => model.PlayerName, ViewBag.PlayerName as SelectList, "None", new { @class = "form-control input-sm" })
        @Html.ValidationMessageFor(model => model.PlayerName, "", new { @class = "text-danger" })
    </div>
    <div class="form-group">
        @Html.LabelFor(model => model.Type)
        @Html.DropDownListFor(model => model.Type, EnumHelper.GetSelectList(typeof(BanType)), "None", new { @class = "form-control input-sm", @id = "Type" })
        @Html.ValidationMessageFor(model => model.Type, "", new { @class = "text-danger" })
    </div>
    <div class="form-group">
        @Html.LabelFor(model => model.Reason)
        @Html.EditorFor(model => model.Reason, new { htmlAttributes = new { @class = "form-control input-sm" } })
        @Html.ValidationMessageFor(model => model.Reason, "", new { @class = "text-danger" })
    </div>
    <div class="form-group">
        @Html.CheckBoxFor(model => model.IsTemped, new { @id = "tempTimeCheck" }) Временное наказание
    </div>
    <div id="tempTime" class="form-group" style="display: none">
        @Html.LabelFor(model => model.TempTime)
        @Html.EditorFor(model => model.TempTime, new { htmlAttributes = new { @class = "form-control input-sm", @type = "datetime", @id = "tempTimeField" } })
        @Html.ValidationMessageFor(model => model.TempTime, "", new { @class = "text-danger" })
    </div>
    <div class="form-group">
        <input class="btn btn-default" type="submit" value="Create" />
    </div>
}

<script type="text/javascript">
    $('#tempTimeCheck').change(function () {
        var isChecked = $('#tempTimeCheck:checked').length;

        if (isChecked) {
            $('#tempTime').css('display', 'block');
            $('#tempTimeField').attr('required', 'required');
        } else {
            $('#tempTime').css('display', 'none');
            $('#tempTimeField').removeAttr('required');
        }
    });
</script>